<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://www.gstatic.com/firebasejs/5.7.0/firebase.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>売上</title>
</head>
<body>
    <p>チケット販売枚数</p>
        <p id="sale"></p>
    <p id="recept">受け渡し数</p>
        <p id="salt"></p>
        <p id="cons"></p>
        <p id="list"></p>
        <button type="button" onclick="reset()">リセット</button>
        <script>

        var password = localStorage.getItem('hakkasai-pass');
                if(password!='loggedin'){
            window.open('../login.html','_self');
                }
            
            /**---------------------------------------
 * --------APIトークンなどの記述------------ */
const firebaseConfig = {
	apiKey: "AIzaSyBNhorPJIFWRMi6Pq4NIc8Asi-Iiabb4jI",
    authDomain: "biology-test-384608.firebaseapp.com",
    databaseURL: "https://biology-test-384608-default-rtdb.firebaseio.com",
    projectId: "biology-test-384608",
    storageBucket: "biology-test-384608.appspot.com",
    measurementId: "G-R6CEKT1NL2"
    };
    firebase.initializeApp(firebaseConfig);
    var db=firebase.database();
    
    db.ref('soldlist').once('value',function(obj){
        var soldlist=obj.val();
        for (var i = 0; i < soldlist.length; i++) { 
    var todoList = document.createElement('li'); 
    todoList.textContent = soldlist[i];
    document.getElementById('list').appendChild(todoList); 
}
    })
    db.ref('sold').once('value',function(obj){
        var sold = obj.val();
        document.getElementById('salt').innerHTML="塩："+sold.salt;
        document.getElementById('cons').innerHTML="コンソメ："+sold.cons;
        document.getElementById('sale').innerHTML=sold.sale;
    })
    function reset(){
        var password = window.prompt('パスワードを入力してください','');
        if(password=='hakkasai'){
            db.ref('customer').remove();
            var saltorder =0;
            var consorder =0;
            db.ref('order').update({saltorder,consorder});
            db.ref('soldlist').remove();
            var salt =0;
            var cons = 0;
            var sale = 0;
            db.ref('sold').update({salt,cons,sale});
            db.ref('checklist').remove();
            db.ref('current').remove();
            db.ref('register').remove();
            location.reload();
        }else{
            alert('パスワードが違います')
        }
    }
        </script>
</body>
</html>