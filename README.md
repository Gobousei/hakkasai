# 白華祭自動応答システム
## 目的
・白華祭の模擬店で、画期的なシステムを。

・Chrome bookの性能、制約がどうであれ、アイデア次第で何でもできることを1,2年生に示し、白華祭を創意工夫の場としてほしい。

## 機能
システムの持つ機能です。

・QRコードの読み取り/コードチェック

・事前注文（当日は不使用）

・有人受付

・注文数表示

・集計

## 実際のページ
[ページ](https://gobousei.github.io/hakkasai)

パスワード入力を求められます。パスワードは、 *「risuka」* 。

## 使い方
この[フォルダ](https://github.com/Gobousei/hakkasai/tree/main/how-to-use)にまとめてある。

## 使用したサードパーティ製品
このシステムの作成に際して、[Firebase Realtime Database](https://firebase.google.com/?hl=ja)、[Github (Github pages)](https://github.com)、[JSQR](https://github.com/cozmo/jsQR)を使用した。

### Firebase Realtime Database
Firebase Realtime Database は、Googleが提供するNoSQLデータベースで、JSON形式でデータを保存でき、使用が簡単であること、データ変更時に端末側の任意のプログラムを実行させることができることから使用した。

### Github (Github pages)
Githubは、Microsoftが提供するオープンソース開発プラットフォームで、コードを保存できる他、Github pagesという機能で静的ページを公開することができることから使用した。
Github pages では静的ページしか公開できないことから、このシステムで使用したプログラミング言語はJavaScriptのみ。

### JSQR
JSQRは、JavaScriptで2次元コードを読み込むためのライブラリ。

# 工夫点
## Firebase Realtime Databaseの使用
Firebase Realtime Database　はデータ変更時にプログラムを実行できることから、これをトリガーとしてJavaScriptの関数を実行させ、サーバーレスでの開発を行った。

## コードの暗号化
QRコードに直接番号を記載すると、偽造が容易になる他、コードの信頼性が低下するため、QRコードには暗号化を施した。販売は終了したので、暗号ルールを公開する。

例： *2905SHEMD2* ▶番号：2
#### 上二桁
上二桁には、五桁目以降の表記された基数を二桁、10進数で表記する。（10~32進数。11進数からにしたほうが良かった気もする。）

上の例だと、29となっているので、SHEMD2は29進数で表記されている。

#### 三、四桁目
次の二桁には、勘合となるコードの桁数を10進数で必ず2桁を使って表記されている。

上の例だと、05となっているので、勘合となるコードはSHEMDとなる。

#### 勘合コード
一、二桁目で表記された基数、三、四桁目で示された桁数で表記されており、これを10進数に直すと、20230906（白華祭前日の日付）となる。前日になったのは、ただの勘違い。

上の例だと、SHEMDを29進数から10進数に直すと、20230906となる。

#### 通し番号
勘合コードより下の桁には、通し番号が一、二桁目で表記された基数で表記されている。この番号を、Realtime Databaseの受渡しリストと照合し、重複の無いことを確認する。

上の例だと、2。

## 改善点
### 注文数表示
注文数を表示する際、データベースにそれぞれの個数を表記していたが、注文リストを数えたほうがエラーはなかった。

### ファイル配置
このシステムでは、ほとんどすべてのフォルダにJSQR,Style.cssを設置しているが、一つにまとめたほうが良かったと思う。
